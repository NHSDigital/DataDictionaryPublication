{"Filename":"C:\\GIT\\DataDictionaryPublication\\FreeMarker templates\\DITA\\UML SVG Topic  DD.json","FileType":"MauroProject","Actions":[{"Template":"\u003C#ftl output_format=\u0022XML\u0022\u003E\r\n\u003C?xml version=\u00221.0\u0022 encoding=\u0022UTF-8\u0022?\u003E\r\n\u003C!DOCTYPE topic PUBLIC \u0022-//OASIS//DTD DITA Topic//EN\u0022 \u0022topic.dtd\u0022\u003E\r\n\u003Ctopic id=\u0022uml-${dataClass.id}\u0022 audience=\u0022diagrams\u0022\u003E\r\n    \u003Ctitle\u003E${dataClass.label}\u003C/title\u003E\r\n    \u003Cbody\u003E\r\n       \u003Cfig frame=\u0022all\u0022 expanse=\u0022page\u0022\u003E\r\n          \u003Ctitle\u003EDiagram of ${dataClass.label} and related classes\u003C/title\u003E\r\n          \u003Csvg-container\u003E\r\n               \u003Csvgref href=\u0022ClassDiagram_${dataClass.dataModel.label?url_path(\u0027utf-8\u0027)}%20-%20${dataClass.label?url_path(\u0027utf-8\u0027)}.dot.svg\u0022 /\u003E\r\n          \u003C/svg-container\u003E\r\n       \u003C/fig\u003E\r\n    \u003C/body\u003E\r\n\u003C/topic\u003E","FilePrefix":"ClassDiagram_","FileSuffix":".dita","ActionType":0,"Name":"Topic to contain a diagram","Description":"No description","id":"195596a8-84dc-4fa5-a61d-38df647713ae"},{"Template":"\u003C#ftl output_format=\u0022XML\u0022\u003E\r\n\u003C?xml version=\u00221.0\u0022 encoding=\u0022UTF-8\u0022?\u003E\r\n\u003C!DOCTYPE topic PUBLIC \u0022-//OASIS//DTD DITA Topic//EN\u0022 \u0022topic.dtd\u0022\u003E\r\n\u003Ctopic id=\u0022uml-${dataModel.id}\u0022 audience=\u0022diagrams\u0022\u003E\r\n    \u003Ctitle\u003E${dataModel.label}\u003C/title\u003E\r\n    \u003Cbody\u003E\r\n        \r\n    \u003Cp\u003E\r\n${dataModel.description!\u0022\u0022}\r\n    \u003C/p\u003E\r\n    \r\n    \u003C/body\u003E\r\n\u003C/topic\u003E","FilePrefix":"Model_","FileSuffix":".dita","ActionType":1,"Name":"Model introduction DITA topic","Description":"No description","id":"26acccb2-02fb-4aae-9bcf-27937020e32a"},{"Template":"\u003C#macro createLines dataClass\u003E\r\n\u0022C:\\Program Files (x86)\\Graphviz2.38\\bin\\dot\u0022 -O -Tsvg \u0022ClassDiagram_${dataClass.dataModel.label} - ${dataClass.label}.dot\u0022\r\n\u003C#list dataClass.childDataClasses as dc \u003E\r\n\u003C@createLines dc /\u003E\r\n\u003C/#list\u003E\r\n\u003C/#macro\u003E\r\nRem Batch file to generate SVG from DOT files \r\nRem Freemarker version ${.version}\r\n\u003C#list dataModel.childDataClasses as dataClass \u003E\r\n\u003C@createLines dataClass /\u003E\r\n\u003C/#list\u003E","FilePrefix":"Model_","FileSuffix":".bat","ActionType":1,"Name":"Batch file","Description":"No description","id":"b87870e8-d21a-453e-b2e7-dc318319edc9"},{"Template":"\u003C#macro topicref dataClass \u003E\r\n        \u003Ctopicref href=\u0022ClassDiagram_${dataClass.dataModel.label?url_path(\u0027utf-8\u0027)}%20-%20${dataClass.label?url_path(\u0027utf-8\u0027)}.dita\u0022 navtitle=\u0022${dataClass.label}\u0022/\u003E\r\n    \u003C#list dataClass.childDataClasses?sort_by(\u0022label\u0022) as class\u003E\r\n    \u003C@topicref class /\u003E\r\n    \u003C/#list\u003E\r\n\u003C/#macro\u003E\r\n\u003C?xml version=\u00221.0\u0022 encoding=\u0022UTF-8\u0022?\u003E\r\n\u003C!DOCTYPE map PUBLIC \u0022-//OASIS//DTD DITA Map//EN\u0022 \u0022map.dtd\u0022\u003E\r\n\u003Cmap\u003E\r\n    \u003Ctitle\u003E${dataModel.label!\u0022A model\u0022}\u003C/title\u003E\r\n    \u003Ctopicref href=\u0022Model_${dataModel.label?url_path(\u0027utf-8\u0027)}.dita\u0022\u003E\r\n    \u003C#list dataModel.childDataClasses?sort_by(\u0022label\u0022) as class\u003E\r\n    \u003C@topicref class /\u003E\r\n    \u003C/#list\u003E\r\n    \u003C/topicref\u003E\r\n\u003C/map\u003E","FilePrefix":"Model_","FileSuffix":".ditamap","ActionType":1,"Name":"DITAMAP to link the topics together","Description":"No description","id":"004ecb59-64c1-4b47-81ce-373ae8d900f1"},{"Template":"\u003C#-- Configuration parameters --\u003E\r\n\u003C#assign siteRoot=\u0022https://datadictionary.nhs.uk/\u0022\u003E\r\n\r\n\u003C#-- Get DD Parameters for an object --\u003E\r\n\u003C#function getDDParameter catalogueItem, parameter \u003E\r\n\u003C#-- catalogueItem.metadata?filter(p -\u003E p.namespace=\u0022datadictionary.nhs.uk\u0022)?filter(p -\u003E p.key=parameter).first.value  --\u003E\r\n\u003C#assign res=catalogueItem.label \u003E\r\n\u003C#return \u0022\u0022 \u003E\r\n\u003C/#function\u003E\r\n\u003C#macro drawChildren class\u003E\r\n// Children of ${class.label!\u0022Unknown class\u0022}\r\n    \u003C#list class.childDataClasses as related\u003E\r\n        \u0022${class.id}\u0022 -\u003E \u0022${related.id}\u0022 [\r\n                arrowhead = \u0022empty\u0022\r\n                headlabel = \u0022\u003C@multiplicity class /\u003E\u0022\r\n                taillabel = \u0022\u003C@multiplicity related /\u003E\u0022\r\n        ]\r\n        \u003C@drawClass related /\u003E\r\n    \u003C/#list\u003E\r\n\u003C/#macro\u003E\r\n\u003C#-- writeDDMultiplicity - writes the multiplicity of the association using DD properties --\u003E\r\n\u003C#macro writeDDMultiplicity rel\u003E\r\n          // Multiplicity UIDs \r\n          // Client ${getDDParameter( rel \u0022clientCardinality\u0022 )}  ${getDDParameter( rel \u0022clientUin\u0022 )}\r\n          // Supplier ${getDDParameter( rel \u0022supplierCardinality\u0022 )}  ${getDDParameter( rel \u0022supplierUin\u0022 )}\r\n          // direction ${getDDParameter( rel \u0022direction\u0022 )}\r\n\u003C/#macro\u003E\r\n\u003C#macro drawParent class\u003E\r\n// Parent(s) of ${class.label!\u0022Unknown class\u0022}\r\n\u003C#if class.parentDataClass??\u003E\r\n\u003C@drawClass class.parentDataClass /\u003E\r\n        \u0022${class.parentDataClass.id}\u0022 -\u003E \u0022${class.id}\u0022 [\r\n                arrowtail = \u0022empty\u0022\r\n                headlabel = \u0022\u003C@multiplicity class /\u003E\u0022\r\n                taillabel = \u0022\u003C@multiplicity class.parentDataClass /\u003E\u0022\r\n        ]\r\n\u003C#else\u003E\r\n// No Parent\r\n\u003C/#if\u003E\r\n\u003C/#macro\u003E\r\n\u003C#macro drawClass class incType=\u0022no\u0022\u003E\r\n// class ${getDDParameter( class \u0022TitleCaseName\u0022 )}\r\n        \u0022${class.id}\u0022 [ \r\n                tooltip = \u0022${class.label}\u0022,\r\n                label = \u003C \r\n                \u003Ctable border=\u00220\u0022\u003E\r\n                \u003Ctr\u003E\u003Ctd border=\u00220\u0022 align=\u0022center\u0022 style=\u0022class\u0022\u003E\u003Cb\u003E${class.label!\u0022Unknown class\u0022}\u003C/b\u003E\u003C/td\u003E\u003C/tr\u003E\r\n                \u003C#list class.childDataElements?filter(p -\u003E p.dataType.domainType != \u0022ReferenceType\u0022) as dataElement\u003E\r\n                \u003Ctr\u003E\u003Ctd border=\u00220\u0022 align=\u0022left\u0022 style=\u0022attribute\u0022 href=\u0022${siteRoot}attributes/${dataElement.label?replace(\u0022 \u0022,\u0022_\u0022)}.html\u0022 title=\u0022Element: ${dataElement.label}\u0022\u003E\u002B ${dataElement.label}\u003C#if incType != \u0022no\u0022\u003E : ${dataElement.dataType.label!\u0022Missing datatype\u0022} \u003C/#if\u003E[\u003C@multiplicity dataElement /\u003E]\u003C/td\u003E\u003C/tr\u003E\u003C/#list\u003E\r\n                \u003C/table\u003E\r\n                \u003E\r\n                class=\u0022class\u0022\r\n        ]\r\n\u003C/#macro\u003E\r\n\u003C#macro multiplicity object\u003E\r\n\u003C#if object.minMultiplicity??\u003E\u003C#if object.minMultiplicity == object.maxMultiplicity\u003E${object.minMultiplicity}\u003C#else\u003E${object.minMultiplicity}..\u003C#if object.maxMultiplicity==-1\u003E*\u003C#else\u003E${object.maxMultiplicity!\u0022?\u0022}\u003C/#if\u003E\u003C/#if\u003E\u003C/#if\u003E\u003C/#macro\u003E\r\n\u003C#macro relatedClasses dataClass\u003E\r\n// Classes related to ${dataClass.label} \r\n\u003C#list dataClass.childDataElements?filter(p -\u003E p.dataType.domainType == \u0022ReferenceType\u0022) as dataElement \u003E\r\n       \u0022${dataClass.id}\u0022 -\u003E \u0022${dataElement.dataType.id}\u0022 [label=\u0022${dataElement.label}\u0022 arrowhead=\u0022none\u0022 arrowtail=\u0022none\u0022]\r\n        \u0022${dataElement.dataType.id}\u0022 [label= \u0022${dataElement.dataType.label?replace(\u0022 Reference\u0022,\u0022\u0022)}\u0022 URL=\u0022https://datadictionary.nhs.uk/classes/${dataElement.dataType.label?replace(\u0022 Reference\u0022,\u0022\u0022)?replace(\u0022 \u0022,\u0022_\u0022)}.html\u0022]\r\n        // ${dataElement.label}    ${dataElement.dataType.id} \r\n        //\r\n        // Listing the multiplicity properties for class ${dataClass.id} ${dataClass.label}\r\n\u003C#attempt\u003E\r\n\u003C@writeDDMultiplicity dataElement /\u003E\r\n\u003C#recover\u003E\r\n        // Failed to list multiplicities\r\n\u003C/#attempt\u003E\r\n\u003C/#list\u003E\r\n\u003C/#macro\u003E\r\n\r\ndigraph G {\r\n        node [\r\n            shape = \u0022record\u0022\r\n        ]\r\n        edge [\r\n        ]\r\n        stylesheet = \u0022https://datadictionary.nhs.uk/oxygen-webhelp/template/NHSD.css\u0022\r\n        \r\n// The root class\r\n\u003C@drawClass dataClass /\u003E\r\n\r\n// The child classes\r\n\u003C@drawChildren dataClass /\u003E  \r\n \r\n// The related classes\r\n\u003C@relatedClasses dataClass /\u003E       \r\n      \r\n}","FilePrefix":"ClassDiagram_","FileSuffix":".dot","ActionType":0,"Name":"GraphViz UML using HTML tags","Description":"No description","id":"cdae6dcf-0024-4f59-887b-69fa89f71f73"}],"Models":["a8e0180e-647f-4047-b41d-1243cbcd2e49"],"EndpointURL":"https://modelcatalogue.cs.ox.ac.uk/nhsd","Username":"","Password":"","Timeout":{"Ticks":0,"Days":0,"Hours":0,"Milliseconds":0,"Minutes":0,"Seconds":0,"TotalDays":0,"TotalHours":0,"TotalMilliseconds":0,"TotalMinutes":0,"TotalSeconds":0}}